---
import { useI18n } from '../../i18n/utils';

interface Props {
  images: string[];
  projectName: string;
}

const { images, projectName } = Astro.props;
const { t } = useI18n(Astro.url);

// If no images provided, use placeholder grid
const hasImages = images && images.length > 0;
const placeholderCount = 12; // Default placeholder count for empty gallery
---

<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16">
  <h2 class="text-4xl lg:text-5xl font-semibold text-brand-primary tracking-tight mb-8">
    {t.projectDetail.gallery}
  </h2>

  {hasImages ? (
    <!-- Masonry Grid with actual images -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {images.map((image, index) => (
        <div
          class={`rounded-[30px] overflow-hidden ${
            index % 5 === 0 ? 'md:col-span-2 aspect-[2/1]' : 'aspect-square'
          }`}
        >
          <img
            src={image}
            alt={`${projectName} gallery image ${index + 1}`}
            class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
            loading="lazy"
            decoding="async"
          />
        </div>
      ))}
    </div>
  ) : (
    <!-- Placeholder Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Row 1: 3 square images -->
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>

      <!-- Row 2: Wide image + square -->
      <div class="bg-gray-200 rounded-[30px] md:col-span-2 aspect-[2/1]"></div>
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>

      <!-- Row 3: Square + tall + square -->
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>
      <div class="bg-gray-200 rounded-[30px] md:row-span-2 aspect-square md:aspect-auto md:h-full"></div>
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>

      <!-- Row 4: 2 squares -->
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>
      <div class="bg-gray-200 rounded-[30px] aspect-square"></div>
    </div>
  )}
</section>
